!function(t,e){function n(t){return this instanceof n?(this.el=a.query(t)||t,this.events={update:new r,end:new r},this.engine=n.support.transition?new o(this):new i(this),void this.duration(n.defaults.duration)):new n(t)}function r(){this.c=[]}function i(t){this.main=t,this.el=t.el,this._start={},this._end={}}function o(t){this.main=t,this.el=t.el,this._update=a.bind(this.update,this),this._end=a.bind(this.end,this),this.reset()}var s=e.createElement("div").style,a={extend:function(t,e){for(var n in e)t[n]=e[n];return t},bind:function(t,e){return function(){t.apply(e,[].slice.call(arguments))}},style:function(e,n){return t.getComputedStyle?getComputedStyle(e).getPropertyValue(a.uncamel(n)):e.currentStyle?e.currentStyle[a.camel(n)]:e.style[a.camel(n)]},matrix:function(t){var e=t.match(/\(([-\d., ]+?)\)/)[1].split(", ");return 6==e.length?{x:e[4],y:e[5]}:16==e.length?{x:e[12],y:e[13]}:void 0},contains:function(t,e){for(var n in t)if(t[n]===e)return!0;return!1},query:function(t,n){return"string"!=typeof t?null:(n=n||e,n.querySelector(t))},vendorPropName:function(t){if(t in s)return t;for(var e=a.camel("-"+t),n=["Moz","Webkit","O","ms"],r=0;r<n.length;r++)if(t=n[r]+e,t in s)return t},has3d:function(){var t=a.vendorPropName("transform");return s[t]="",s[t]="rotateY(90deg)",""!==s[t]},on:function(t,e,n){for(var r=e.split(" "),i=0;i<r.length;i++)t.attachEvent?t.attachEvent("on"+r[i],n):t.addEventListener(r[i],n,!1)},off:function(t,e,n){for(var r=e.split(" "),i=0;i<r.length;i++)t.detachEvent?t.detachEvent("on"+r[i],n):t.removeEventListener(r[i],n,!1)},camel:function(t){return(""+t).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},uncamel:function(t){return(""+t).replace(/([A-Z])/g,"-$1").toLowerCase()},addUnit:function(t){return"string"==typeof t?t:t+"px"},getUnit:function(t){return"string"==typeof t?t.replace(/[-\d\.]/g,""):"px"},num:function(t){return+(""+t).replace(/[^-\d.]/g,"")},lerp:function(t,e,n){return e+(n-e)*t}};n.defaults={duration:500},n.support={transition:a.vendorPropName("transition"),transform:a.vendorPropName("transform"),transform3d:a.has3d()},n.prototype.duration=function(t){return this.engine.duration(t),this},n.prototype.get=function(t){return this.engine.get(t)},n.prototype.set=function(t,e){return this.engine.set(t,e),this},n.prototype.to=function(t,e){return this.engine.to(t,e),this},n.prototype.ease=function(t){return this.engine.ease(t),this},n.prototype.start=function(){return this.engine.start(),this},n.prototype.on=function(t,e){return this.events[t].on(e),this},n.prototype.off=function(t,e){return this.events[t].off(e),this},t.Morph=n,r.prototype.on=function(t,e){return this.c.push({fn:t,c:e}),this},r.prototype.fire=function(){for(var t=[].slice.call(arguments),e=0;e<this.c.length;e++)this.c[e].fn.apply(this.c[e].c||this,t);return this},r.prototype.off=function(t){if(t)for(var e=0;e<this.c.length;e++)this.c[e]===t&&(this.c.splice(e,1),e--);else this.c=[];return this},i.aliases={x:"left",y:"top"},i.prototype.duration=function(t){this._duration=t},i.prototype.get=function(t){return t=i.aliases[t]||t,a.style(this.el,t)},i.prototype.set=function(t,e){a.extend(this._start,this.add(t,e)),this.setProperties(),this.update()},i.prototype.to=function(t,e){a.extend(this._end,this.add(t,e))},i.prototype.add=function(t,e){var n={};void 0!==e?n[t]=e:a.extend(n,t);for(var r in i.aliases)void 0!==n[r]&&(n[i.aliases[r]]=n[r],delete n[r]);return n},i.prototype.setProperties=function(){for(var t in this._start)this.el.style[a.camel(t)]=a.addUnit(this._start[t])},i.prototype.initProperties=function(){for(var t in this._end)this._start[t]||(this._start[t]=a.style(this.el,t)||1)},i.prototype.applyProperties=function(t){for(var e in this._end){var n=this._start[e],r=this._end[e],i=a.lerp(t,a.num(n),a.num(r));this.el.style[a.camel(e)]=i+a.getUnit(r)}},i.prototype.ease=function(){},i.prototype.start=function(){this.reset(),this.initProperties();var t=this,e=0,n=+new Date,r=function(){e+=(new Date-n)/t._duration,e=e>1?1:e,n=+new Date,t.applyProperties(e),t.update(),1===e&&t.end()};this.id=setInterval(r,16)},i.prototype.update=function(){this.main.events.update.fire()},i.prototype.end=function(){clearInterval(this.id),this.main.events.end.fire()},i.prototype.reset=function(){clearInterval(this.id),this._start={}},o.translate=a.has3d?["translate3d(",", 0)"]:["translate(",")"],o.ends=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"],o.aliases={x:{set:function(t,e){t.transformX=o.translate.join(e+", 0")},get:function(t){return a.matrix(a.style(t,a.vendorPropName("transform"))).x}},y:{set:function(t,e){t.transformY=o.translate.join("0, "+e)},get:function(t){return a.matrix(a.style(t,a.vendorPropName("transform"))).y}}},o.prototype.reset=function(){this._props={},this._transitionProps=[],this._transforms=[],this._ease=""},o.prototype.duration=function(t){this._duration=t},o.prototype.ease=function(t){this._ease=t},o.prototype.setVendorProperty=function(t,e){this.setProperty(a.uncamel(a.vendorPropName(t)),e)},o.prototype.setProperty=function(t,e){this._props[t]=e},o.prototype.get=function(t){return o.aliases[t]?o.aliases[t].get(this.el,t):a.style(this.el,a.vendorPropName(t))},o.prototype.set=function(t,e){this.duration(0),this.to(t,e),this.start(),this.update()},o.prototype.to=function(t,e){var n=this.add(t,e);for(var r in n)r.match(/^transform/)?(this.transform(n[r]),delete n[r]):this.transition(r);a.extend(this._props,n)},o.prototype.add=function(t,e){var n={};void 0!==e?n[t]=e:a.extend(n,t);for(var r in o.aliases)if(void 0!==n[r]){var i=a.addUnit(n[r]);o.aliases[r].set(n,i),delete n[r]}return n},o.prototype.transition=function(t){a.contains(this._transitionProps,t)||this._transitionProps.push(t)},o.prototype.transform=function(t){a.contains(this._transforms,t)||this._transforms.push(t)},o.prototype.applyProperties=function(t){for(var e in t)this.el.style.setProperty(e,t[e])},o.prototype.start=function(){this._transforms.length&&(this.setVendorProperty("transform",this._transforms.join(" ")),this.transition(a.uncamel(n.support.transform))),this.setVendorProperty("transition",""),this._duration>0&&(this.setVendorProperty("transition-duration",this._duration+"ms"),this.setVendorProperty("transition-property",this._transitionProps.join(", ")),this.setVendorProperty("transition-timing-function",this._ease),clearInterval(this.id),this.id=setInterval(this._update,16),this.fired=!1,a.on(this.el,o.ends.join(" "),this._end)),this.applyProperties(this._props),this.reset()},o.prototype.update=function(){this.main.events.update.fire()},o.prototype.end=function(){a.off(this.el,o.ends.join(" "),this._end),clearInterval(this.id),this.fired||(this.fired=!0,this.main.events.end.fire())}}(window,document);