!function(t,n){function e(t){return this instanceof e?(this.el=s.query(t)||t,this.events={update:new i,end:new i},this.engine=e.support.transition?new o(this):new r(this),void this.duration(e.defaults.duration)):new e(t)}function i(){this.c=[]}function r(t){this.main=t,this.el=t.el,this._start={},this._end={}}function o(t){this.main=t,this.el=t.el,this._update=s.bind(this.update,this),this._end=s.bind(this.end,this),this.reset()}var s={extend:function(t,n){for(var e in n)t[e]=n[e];return t},bind:function(t,n){return function(){t.apply(n,[].slice.call(arguments))}},contains:function(t,n){for(var e in t)if(t[e]===n)return!0;return!1},query:function(t,e){return"string"!=typeof t?null:(e=e||n,e.querySelector(t))},vendorPropName:function(t){var e=n.createElement("div").style;if(t in e)return t;for(var i=s.camel("-"+t),r=["Moz","Webkit","O","ms"],o=0;o<r.length;o++)if(t=r[o]+i,t in e)return t},has3d:function(){var t=n.createElement("div").style,e=s.vendorPropName("transform");return t[e]="",t[e]="rotateY(90deg)",""!==t[e]},on:function(t,n,e){for(var i=n.split(" "),r=0;r<i.length;r++)t.attachEvent?t.attachEvent("on"+i[r],e):t.addEventListener(i[r],e,!1)},off:function(t,n,e){for(var i=n.split(" "),r=0;r<i.length;r++)t.detachEvent?t.detachEvent("on"+i[r],e):t.removeEventListener(i[r],e,!1)},camel:function(t){return t.replace(/-(\w)/g,function(t,n){return n.toUpperCase()})},uncamel:function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},addUnit:function(t){return"string"==typeof t?t:t+"px"},getUnit:function(t){return"string"==typeof t?t.replace(/[\d\.]/g,""):"px"},lerp:function(t,n,e){return n+(e-n)*t}};e.defaults={duration:500},e.support={transition:s.vendorPropName("transition"),transform:s.vendorPropName("transform"),transform3d:s.has3d()},e.prototype.duration=function(t){return this.engine.duration(t),this},e.prototype.css=function(t,n){return this.engine.css(t,n),this},e.prototype.to=function(t,n){return this.engine.to(t,n),this},e.prototype.start=function(){return this.engine.start(),this},e.prototype.on=function(t,n){return this.events[t].on(n),this},e.prototype.off=function(t,n){return this.events[t].off(n),this},t.Morph=e,i.prototype.on=function(t,n){return this.c.push({fn:t,c:n}),this},i.prototype.fire=function(){for(var t=[].slice.call(arguments),n=0;n<this.c.length;n++)this.c[n].fn.apply(this.c[n].c||this,t);return this},i.prototype.off=function(t){if(t)for(var n=0;n<this.c.length;n++)this.c[n]===t&&(this.c.splice(n,1),n--);else this.c=[];return this},r.aliases={x:"left",y:"top"},r.prototype.duration=function(t){this._duration=t},r.prototype.css=function(t,n){s.extend(this._start,this.add(t,n)),this.setProperties()},r.prototype.to=function(t,n){s.extend(this._end,this.add(t,n))},r.prototype.add=function(t,n){var e={};void 0!==n?e[t]=n:s.extend(e,t);for(var i in r.aliases)void 0!==e[i]&&(e[r.aliases[i]]=e[i],delete e[i]);return e},r.prototype.setProperties=function(){for(var t in this._start)this.el.style[s.camel(t)]=s.addUnit(this._start[t])},r.prototype.initProperties=function(){for(var t in this._end)this._start[t]||(this._start[t]=this.el.style[s.camel(t)]||1)},r.prototype.applyProperties=function(t){for(var n in this._end){var e=this._start[n],i=this._end[n],r=s.lerp(t,parseFloat(e),parseFloat(i));this.el.style[s.camel(n)]=r+s.getUnit(i)}},r.prototype.start=function(){this.reset(),this.initProperties();var t=this,n=0,e=+new Date,i=function(){n+=(new Date-e)/t._duration,n=n>1?1:n,e=+new Date,t.applyProperties(n),t.main.events.update.fire(),1===n&&t.end()};this.id=setInterval(i,16)},r.prototype.end=function(){clearInterval(this.id),this.main.events.end.fire()},r.prototype.reset=function(){clearInterval(this.id),this._start={}},o.translate=s.has3d?["translate3d(",", 0)"]:["translate(",")"],o.ends=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"],o.aliases={x:function(t){return["#tx",o.translate.join(t+", 0")]},y:function(t){return["#ty",o.translate.join("0, "+t)]}},o.prototype.reset=function(){this._props={},this._transitionProps=[],this._transforms=[]},o.prototype.duration=function(t){this._duration=t},o.prototype.setVendorProperty=function(t,n){this.setProperty(s.uncamel(s.vendorPropName(t)),n)},o.prototype.setProperty=function(t,n){this._props[t]=n},o.prototype.css=function(t,n){this.duration(0),this.to(t,n),this.start()},o.prototype.to=function(t,n){var e=this.add(t,n);for(var i in e)i.match(/^#/)?(this.transform(e[i]),delete e[i]):this.transition(i);s.extend(this._props,e)},o.prototype.add=function(t,n){var e={};void 0!==n?e[t]=n:s.extend(e,t);for(var i in o.aliases)if(void 0!==e[i]){var r=s.addUnit(e[i]),a=o.aliases[i](r);e[a[0]]=a[1],delete e[i]}return e},o.prototype.transition=function(t){s.contains(this._transitionProps,t)||this._transitionProps.push(t)},o.prototype.transform=function(t){s.contains(this._transforms,t)||this._transforms.push(t)},o.prototype.applyProperties=function(t){for(var n in t)this.el.style.setProperty(n,t[n])},o.prototype.start=function(){this._transforms.length&&(this.setVendorProperty("transform",this._transforms.join(" ")),this.transition(s.uncamel(e.support.transform))),this._duration>0&&(this.setVendorProperty("transition-duration",this._duration+"ms"),this.setVendorProperty("transition-property",this._transitionProps.join(", ")),this.id=setInterval(this._update,16),this.fired=!1,s.on(this.el,o.ends.join(" "),this._end)),this.applyProperties(this._props),this.reset()},o.prototype.update=function(){this.main.events.update.fire()},o.prototype.end=function(){s.off(this.el,o.ends.join(" "),this._end),clearInterval(this.id),this.fired||(this.fired=!0,this.main.events.end.fire())}}(window,document);