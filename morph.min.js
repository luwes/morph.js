!function(t,n){function e(t){return this instanceof e?(this.el=a.query(t)||t,this.events={update:new r,end:new r},this.engine=e.support.transition?new o(this):new i(this),void this.duration(e.defaults.duration)):new e(t)}function r(){this.c=[]}function i(t){this.main=t,this.el=t.el,this._start={},this._end={}}function o(t){this.main=t,this.el=t.el,this._update=a.bind(this.update,this),this._end=a.bind(this.end,this),this.reset()}var s=n.createElement("div").style,a={extend:function(t,n){for(var e in n)t[e]=n[e];return t},bind:function(t,n){return function(){t.apply(n,[].slice.call(arguments))}},style:function(n,e){return t.getComputedStyle?getComputedStyle(n).getPropertyValue(a.uncamel(e)):n.currentStyle?n.currentStyle[a.camel(e)]:n.style[a.camel(e)]},matrix:function(t){var n=t.match(/\(([-\d., ]+?)\)/)[1].split(", ");return 6==n.length?{x:n[4],y:n[5]}:16==n.length?{x:n[12],y:n[13]}:void 0},contains:function(t,n){for(var e in t)if(t[e]===n)return!0;return!1},query:function(t,e){return"string"!=typeof t?null:(e=e||n,e.querySelector(t))},vendorPropName:function(t){if(t in s)return t;for(var n=a.camel("-"+t),e=["Moz","Webkit","O","ms"],r=0;r<e.length;r++)if(t=e[r]+n,t in s)return t},has3d:function(){var t=a.vendorPropName("transform");return s[t]="",s[t]="rotateY(90deg)",""!==s[t]},on:function(t,n,e){for(var r=n.split(" "),i=0;i<r.length;i++)t.attachEvent?t.attachEvent("on"+r[i],e):t.addEventListener(r[i],e,!1)},off:function(t,n,e){for(var r=n.split(" "),i=0;i<r.length;i++)t.detachEvent?t.detachEvent("on"+r[i],e):t.removeEventListener(r[i],e,!1)},camel:function(t){return(""+t).replace(/-(\w)/g,function(t,n){return n.toUpperCase()})},uncamel:function(t){return(""+t).replace(/([A-Z])/g,"-$1").toLowerCase()},addUnit:function(t){return"string"==typeof t?t:t+"px"},getUnit:function(t){return"string"==typeof t?t.replace(/[-\d\.]/g,""):"px"},num:function(t){return+(""+t).replace(/[^-\d.]/g,"")},lerp:function(t,n,e){return n+(e-n)*t}};e.defaults={duration:500},e.support={transition:a.vendorPropName("transition"),transform:a.vendorPropName("transform"),transform3d:a.has3d()},e.prototype.duration=function(t){return this.engine.duration(t),this},e.prototype.set=function(t,n){return this.engine.set(t,n),this},e.prototype.get=function(t){return this.engine.get(t)},e.prototype.to=function(t,n){return this.engine.to(t,n),this},e.prototype.start=function(){return this.engine.start(),this},e.prototype.on=function(t,n){return this.events[t].on(n),this},e.prototype.off=function(t,n){return this.events[t].off(n),this},t.Morph=e,r.prototype.on=function(t,n){return this.c.push({fn:t,c:n}),this},r.prototype.fire=function(){for(var t=[].slice.call(arguments),n=0;n<this.c.length;n++)this.c[n].fn.apply(this.c[n].c||this,t);return this},r.prototype.off=function(t){if(t)for(var n=0;n<this.c.length;n++)this.c[n]===t&&(this.c.splice(n,1),n--);else this.c=[];return this},i.aliases={x:"left",y:"top"},i.prototype.duration=function(t){this._duration=t},i.prototype.get=function(t){return t=i.aliases[t]||t,a.style(this.el,t)},i.prototype.set=function(t,n){a.extend(this._start,this.add(t,n)),this.setProperties(),this.update()},i.prototype.to=function(t,n){a.extend(this._end,this.add(t,n))},i.prototype.add=function(t,n){var e={};void 0!==n?e[t]=n:a.extend(e,t);for(var r in i.aliases)void 0!==e[r]&&(e[i.aliases[r]]=e[r],delete e[r]);return e},i.prototype.setProperties=function(){for(var t in this._start)this.el.style[a.camel(t)]=a.addUnit(this._start[t])},i.prototype.initProperties=function(){for(var t in this._end)this._start[t]||(this._start[t]=a.style(this.el,t)||1)},i.prototype.applyProperties=function(t){for(var n in this._end){var e=this._start[n],r=this._end[n],i=a.lerp(t,a.num(e),a.num(r));this.el.style[a.camel(n)]=i+a.getUnit(r)}},i.prototype.start=function(){this.reset(),this.initProperties();var t=this,n=0,e=+new Date,r=function(){n+=(new Date-e)/t._duration,n=n>1?1:n,e=+new Date,t.applyProperties(n),t.update(),1===n&&t.end()};this.id=setInterval(r,16)},i.prototype.update=function(){this.main.events.update.fire()},i.prototype.end=function(){clearInterval(this.id),this.main.events.end.fire()},i.prototype.reset=function(){clearInterval(this.id),this._start={}},o.translate=a.has3d?["translate3d(",", 0)"]:["translate(",")"],o.ends=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"],o.aliases={x:{set:function(t,n){t.transformX=o.translate.join(n+", 0")},get:function(t){return a.matrix(a.style(t,a.vendorPropName("transform"))).x}},y:{set:function(t,n){t.transformY=o.translate.join("0, "+n)},get:function(t){return a.matrix(a.style(t,a.vendorPropName("transform"))).y}}},o.prototype.reset=function(){this._props={},this._transitionProps=[],this._transforms=[]},o.prototype.duration=function(t){this._duration=t},o.prototype.setVendorProperty=function(t,n){this.setProperty(a.uncamel(a.vendorPropName(t)),n)},o.prototype.setProperty=function(t,n){this._props[t]=n},o.prototype.get=function(t){return o.aliases[t]?o.aliases[t].get(this.el,t):a.style(this.el,a.vendorPropName(t))},o.prototype.set=function(t,n){this.duration(0),this.to(t,n),this.start(),this.update()},o.prototype.to=function(t,n){var e=this.add(t,n);for(var r in e)r.match(/^transform/)?(this.transform(e[r]),delete e[r]):this.transition(r);a.extend(this._props,e)},o.prototype.add=function(t,n){var e={};void 0!==n?e[t]=n:a.extend(e,t);for(var r in o.aliases)if(void 0!==e[r]){var i=a.addUnit(e[r]);o.aliases[r].set(e,i),delete e[r]}return e},o.prototype.transition=function(t){a.contains(this._transitionProps,t)||this._transitionProps.push(t)},o.prototype.transform=function(t){a.contains(this._transforms,t)||this._transforms.push(t)},o.prototype.applyProperties=function(t){for(var n in t)this.el.style.setProperty(n,t[n])},o.prototype.start=function(){this._transforms.length&&(this.setVendorProperty("transform",this._transforms.join(" ")),this.transition(a.uncamel(e.support.transform))),this._duration>0&&(this.setVendorProperty("transition-duration",this._duration+"ms"),this.setVendorProperty("transition-property",this._transitionProps.join(", ")),this.id=setInterval(this._update,16),this.fired=!1,a.on(this.el,o.ends.join(" "),this._end)),this.applyProperties(this._props),this.reset()},o.prototype.update=function(){this.main.events.update.fire()},o.prototype.end=function(){a.off(this.el,o.ends.join(" "),this._end),clearInterval(this.id),this.fired||(this.fired=!0,this.main.events.end.fire())}}(window,document);